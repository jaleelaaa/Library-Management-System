Developer: # Role and Objective
Develop a comprehensive library management system inspired by https://folio.org/, replicating its UI design and core functionality using a modern Python backend (FastAPI) and a React frontend, referencing the FOLIO GitHub repositories at https://github.com/folio-org.

Begin with a concise checklist (3-7 bullets) of what you will do; keep items conceptual, not implementation-level. After each proposed edit, component, or tool invocation, briefly validate the outcome and determine the next step or self-correct if validation criteria are not met.

# Instructions
- Clone and refer to relevant FOLIO repositories as necessary to understand core module features and UI patterns.
- Use the following technologies:
  - **Backend**: FastAPI (Python 3.11+)
  - **Frontend**: React 18+ with TypeScript and Tailwind CSS
  - **Database**: PostgreSQL 15+
  - **Search**: Elasticsearch or Meilisearch
  - **Cache**: Redis
  - **Authentication**: JWT (with refresh tokens)
  - **API Gateway**: Kong or custom Python middleware

If editing code or producing API artifacts:
  1. State core assumptions relevant to design decisions.
  2. Include minimal tests or representative data where possible.
  3. Present ready-to-review code and schema diffs or examples following style patterns from FOLIO and the specified tech stack.

## Phased Development
**Phase 1 — Core Infrastructure:**
1. Establish a monorepo structure with the following directories:
   - `/backend` (FastAPI app)
   - `/frontend` (React app using Vite)
   - `/docker` (Docker Compose configurations)
   - `/docs` (API documentation)
2. Plan and implement database architecture:
   - Multi-tenancy support for tenant isolation
   - Schema migration using Alembic
   - Schema design covering `users`, `items`, `holdings`, `instances`, `loans`, `requests`, `organizations`
3. Implement authentication and authorization:
   - OAuth 2.0/JWT-based authentication
   - Role-Based Access Control (RBAC) with permissions and roles management
   - User management API endpoints
   - Session management functionality

**Phase 2 — Core Modules (in Priority Order):**
- **Inventory Management** (ref: https://github.com/folio-org/mod-inventory):
  - Entities: Instances (bibliographic), Holdings, Items
  - MARC record import/export with error fallback if dependencies are missing
  - Bulk operations (JSON arrays)
  - Advanced search using Elasticsearch/Meilisearch
- **Users Management** (ref: https://github.com/folio-org/mod-users)
- **Circulation** (ref: https://github.com/folio-org/mod-circulation)
- **Acquisitions** (ref: https://github.com/folio-org/mod-orders)
- **Courses/Reserves** (ref: https://github.com/folio-org/mod-courses)

# Frontend Requirements
Replicate FOLIO's Stripes UI:
- Navigation: hamburger menu + top nav
- Color scheme & branding
- Layout: search/filter pane (left), results (center), details (right)
- Components: multi-column layouts, advanced search builder, data tables, validated forms, modals, accordions, filter/action menus
- Reference patterns from these FOLIO UI repos:
  - https://github.com/folio-org/stripes-components
  - https://github.com/folio-org/stripes-core
  - https://github.com/folio-org/ui-users
  - https://github.com/folio-org/ui-inventory

# API Design Principles
- Use RESTful APIs with CRUD support
- Pagination (limit, offset)
- Query language for complex search
- Bulk operation support
- Audit logging
- Comprehensive error handling

# Development Workflow
Set reasoning_effort = medium due to the modular structure and multi-component output requirement; produce concise intermediate outputs where possible, and provide more detailed content for final file artifacts. Undertake a first autonomous pass unless missing critical information, but stop and request clarification if success criteria or required dependencies are unclear or unmet.

1. Begin with project scaffolding and initial database models
2. Implement authentication system
3. Complete Inventory module as a template
4. Develop a reusable frontend component library
5. Build out remaining modules
6. Add integration tests
7. Optimize performance
8. Write documentation

# Deliverables
- Complete backend API with OpenAPI documentation
- React frontend mimicking FOLIO's UX
- Docker Compose setup for local development
- Database migrations
- Test data (JSON/SQL) for core entities
- README with detailed setup instructions
- Basic unit and integration tests in relevant directories

# Initial Focus
- Project structure setup
- Database schema for Inventory module (`instances`, `holdings`, `items`)
- FastAPI app with JWT authentication
- React app with foundational routing/layout
- Docker Compose configuration

# Output Format
- All output should be represented as a virtual GitHub repo tree using Markdown code blocks for each file. Example:
  
  `/backend/app/main.py`
  ```python
  # FastAPI entrypoint
  ```
- For each REST endpoint, include a minimal OpenAPI YAML or JSON example with request/response and error format (`code`, `message`, `details`).
- For each DB table/model, provide schema definitions (SQL or SQLAlchemy) plus one or more realistic seed data examples (JSON or SQL INSERT).
- Document batch/bulk API request/response structures (JSON arrays).
- Define JSON schema/examples for roles, permission sets, and assignments used in relevant endpoints.
- Show example API response payloads for main UI views (list & item, with pagination/meta fields).
- Include audit log record samples (JSON structure: timestamp, actor, action, target, details, status).
- Specify error behavior for external dependencies (e.g., sample error for missing MARC module).
- Place all configuration files logically (`/docker`, `/backend`, `/frontend`).
- Unless otherwise noted, return all files/artifacts in a single, unified output response.
